<div data-bind="dropdown: 'game-log'"></div>

<h1>Game Log <span data-bind="newWindow: []"></span></h1>
<p>More: <a data-bind="attrLeagueUrl: {href: ['roster', abbrev, season]}">Roster</a> | <a data-bind="attrLeagueUrl: {href: ['team_finances', abbrev]}">Finances</a> | <a data-bind="attrLeagueUrl: {href: ['team_history', abbrev]}">History</a></p>

<p>
<div class="row">
  <div class="col-md-9" id="box-score">
    <!-- ko if: showBoxScore -->
      <center>
        <h2><a data-bind="attrLeagueUrl: {href: ['roster', boxScore.won.abbrev, boxScore.season]}, text: boxScore.won.region() + ' ' + boxScore.won.name()"></a> <span data-bind="text: boxScore.won.pts"></span>, <a data-bind="attrLeagueUrl: {href: ['roster', boxScore.lost.abbrev, boxScore.season]}, text: boxScore.lost.region() + ' ' + boxScore.lost.name()"></a> <span data-bind="text: boxScore.lost.pts"></span><span data-bind="text: boxScore.overtime"></span></h2>

        <table>
          <tr><td>
            <a class="btn btn-default disabled" style="margin-right: 1em" data-bind="css: {disabled: boxScore.prevGid() === null}, attrLeagueUrl: {href: ['game_log', abbrev, season, boxScore.prevGid]}"">Prev</a>
          </td><td>
            <table class="table table-bordered" style="margin-top: 0.5em; width: auto; float: left">
              <tbody data-bind="foreach: boxScore.teams">
                <th><a data-bind="attrLeagueUrl: {href: ['roster', abbrev, $root.boxScore.season]}, text: abbrev"></a></th>
                <!-- ko foreach: ptsQtrs -->
                  <td data-bind="text: $data"></td>
                <!-- /ko -->
                <th data-bind="text: pts"></th>
              </tbody>
            </table>
          </td><td>
            <a class="btn btn-default disabled" style="margin-left: 1em" data-bind="css: {disabled: boxScore.nextGid() === null}, attrLeagueUrl: {href: ['game_log', abbrev, season, boxScore.nextGid]}">Next</a>
          </td></tr>
        </table>

      </center>
      <!-- ko foreach: boxScore.teams -->
        <h3><a data-bind="attrLeagueUrl: {href: ['roster', abbrev, $root.boxScore.season]}, text: region() + ' ' + name()"></a></h3>
        <div class="table-responsive">
          <table class="table table-striped table-bordered table-condensed box-score-team">
            <thead>
             <tr><th>Skaters</th></tr>			
			
<!--              <tr><th>Name</th><th>Pos</th><th>G</th><th>A</th><th>+/-</th><th>SOG</th><th>MS</th><th>BS</th><th>PN</th><th>PIM</th><th>HT</th><th>TK</th><th>BS</th><th>GV</th><th>TOT</th><th>PP</th><th>SH</th><th>EV</th><th>FW</th><th>FL</th></tr> -->
<!--              <tr><th>Name</th><th>Pos</th><th>G</th><th>A</th><th>+/-</th><th>SOG</th><th>MS</th><th>BS</th><th>PN</th><th>PIM</th><th>HT</th><th>TK</th><th>BS</th><th>GV</th><th>TOT</th><th>PP</th><th>SH</th><th>FW</th><th>FL</th></tr> -->
              <tr><th>Name</th><th>Pos</th><th>G</th><th>A</th><th>+/-</th><th>SOG</th><th>MS</th><th>BS</th><th>PIM</th><th>HT</th><th>TK</th><th>BS</th><th>GV</th><th>TOT</th><th>PP</th><th>SH</th><th>FW</th><th>FL</th></tr>
            </thead>
            <tbody data-bind="foreach: players">
<!--               <tr data-bind="if: fga ">				-->
               <tr data-bind="if: min ">				
              <!--<tr data-bind="attr: {class: $index() === 4 || $index() === $parent.players().length - 1 ? 'separator' : ''}"> -->
                <td data-bind="playerNameLabels: [pid, name, injury, skills]"></td>
                <td data-bind="text: pos"></td>
<!--                <td data-bind="text: fg() + '-' + fga()"></td>
                <td data-bind="text: tp() + '-' + tpa()"></td>
                <td data-bind="text: ft() + '-' + fta()"></td> -->
                <td data-bind="text: fg"></td>
                <td data-bind="text: ast"></td>				
                <td data-bind="text: plusminus"></td>
                <td data-bind="text: fga"></td>
                <td data-bind="text: mfg"></td>
                <td data-bind="text: fgs"></td>
                <!--<td data-bind="text: pf"></td>-->
                <td data-bind="round: [pmin, 1]"></td>
                <td data-bind="text: hits"></td>
                <td data-bind="text: stl"></td>
                <td data-bind="text: blk"></td>
                <td data-bind="text: tov"></td>
                <td data-bind="round: [min, 1]"></td>
                <td data-bind="round: [ppmin, 1]"></td>
                <td data-bind="round: [shmin, 1]"></td>
        <!--        <td data-bind="round: [emin, 1]"></td> -->
				
                <td data-bind="text: fow"></td>
                <td data-bind="text: fol"></td>
				
              </tr>
            </tbody>
            <tbody>
              <tr>
                <td>Total</td>
                <td></td>
          <!--     <tr data-bind="if: fga ">				-->
              <!--<tr data-bind="attr: {class: $index() === 4 || $index() === $parent.players().length - 1 ? 'separator' : ''}"> -->
<!--                <td data-bind="text: fg() + '-' + fga()"></td>
                <td data-bind="text: tp() + '-' + tpa()"></td>
                <td data-bind="text: ft() + '-' + fta()"></td> -->
                <td data-bind="text: fg"></td>
                <td data-bind="text: ast"></td>		
                <td ></td>				
                <td data-bind="text: fga"></td>
                <td data-bind="text: mfg"></td>
                <td data-bind="text: fgs"></td>
            <!--    <td data-bind="text: pf"></td> -->
                <td data-bind="round: [pmin, 1]"></td>
                <td data-bind="text: hits"></td>
                <td data-bind="text: stl"></td>
                <td data-bind="text: blk"></td>
                <td data-bind="text: tov"></td>
                <td ></td>
                <td ></td>
                <td ></td>
         <!--       <td ></td> -->
				
                <td data-bind="text: fow"></td>
                <td data-bind="text: fol"></td>


              </tr>
            </tbody>
            <thead>
             <tr><th>Goalies</th></tr>			
              <tr><th>Name</th><th>Pos</th><th>SA</th><th>GA</th><th>Save</th><th>TOI</th><th>PP</th><th>SH</th></tr>
            </thead>
            <tbody data-bind="foreach: players">
               <tr data-bind="if: sfga ">				
              <!--<tr data-bind="attr: {class: $index() === 4 || $index() === $parent.players().length - 1 ? 'separator' : ''}"> -->
                <td data-bind="playerNameLabels: [pid, name, injury, skills]"></td>
                <td data-bind="text: pos"></td>
                <td data-bind="text: sfga"></td>
                <td data-bind="text: sfg"></td>
                <td data-bind="text: sfgs"></td>
                <td data-bind="round: [min, 1]"></td>
                <td data-bind="round: [ppmin, 1]"></td>
                <td data-bind="round: [shmin, 1]"></td>				

              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td>Total</td>
                <td></td>
                <td data-bind="text: sfga"></td>
                <td data-bind="text: sfg"></td>
                <td data-bind="text: sfgs"></td>
                <td ></td>
                <td ></td>
                <td ></td>				
<!--				
                <td data-bind="text: min"></td>
                <td data-bind="text: sfg() + '-' + sfga()"></td>
                <td data-bind="text: stp() + '-' + stpa()"></td>
                <td data-bind="text: sft() + '-' + sfta()"></td>
                <td data-bind="text: orb"></td>
                <td data-bind="text: trb"></td>
                <td data-bind="text: ast"></td>
                <td data-bind="text: tov"></td>
                <td data-bind="text: stl"></td>
                <td data-bind="text: blk"></td>
                <td data-bind="text: pf"></td>
                <td data-bind="text: pts"></td>-->
              </tr>
            </tfoot>			
			
          </table>
        </div>
      <!-- /ko -->
      <br>
      <p>Attendance: <span data-bind="numberWithCommas: boxScore.att"></span></p>
	  
       <p>Definitions: </p>
	   
	   <!-- http://www.nhl.com/scores/htmlreports/20152016/ES020901.HTM -->
	   
       <p>G - Goals <br>  				 <!--fg-->
	   A - Assists <br> 				  <!--ast-->
	   "+/-" - Change in score while in game<br> <!--plusminus-->
	   SOG - Shots on goal<br>			 <!--fga-->
	   MS - Missed shots <br>  			<!--mfg-->
	   BS - Blocked shots - offense <br><!--fgs--> 	   
	   PIM - Penalty Minutes <br>			<!--pmin--> 	   
	   HT - Hits given <br>				<!--hits--> 	   
	   TK - Takaway <br>				<!--stl--> 	   
	   BS - Blocked shots - defense <br><!--blk--> 	   
	   GV - Giveaway <br>					<!--tov--> 	   
	   TOT - Total strength time <br><!--min--> 	   
	   PP - Powerplay time <br>	   <!--ppmin--> 	   
	   SH - Shorthand time <br>	   <!--shmin--> 	   
	   FW - Faceoffs won <br>	  <!--fow--> 	   
	   FL - Faceoffs lost <br>	  <!--fol--> 	   	   
	   SA - Shots at <br>	   	  <!--sfga-->  	   
	   GA - Goals against <br>	  <!--sfg-->  	    	   	   
	   Save - Saves <br>	   	 <!--sfgs-->   	   
	   TOI -  Time on ice<br>	  <!--[min, 1]-->   	     	   	   
	   PIM - Penalty minutes  <br>	   	   	   	   
	   </p>

    <!-- /ko -->
    <p data-bind="visible: !showBoxScore()">Select a game from the menu to view a box score.</p>
  </div>

  <div class="col-md-3" id="game-log-list">
    <table id="game_log_list" class="table table-striped table-bordered table-condensed">
    <thead>
      <tr><th>Opp</th><th>W/L</th><th>Score</th></tr>
    </thead>
    <tbody data-bind="foreach: gamesList.games">
      <tr data-bind="css: {info: gid === $root.boxScore.gid()}">
        <td><a data-bind="attrLeagueUrl: {href: ['game_log', $root.abbrev, $root.season, gid]}, text: (home ? '' : '@') + oppAbbrev"></a></td>
        <td><a data-bind="attrLeagueUrl: {href: ['game_log', $root.abbrev, $root.season, gid]}, text: won ? 'W' : 'L'"></a></td>
        <td><a data-bind="attrLeagueUrl: {href: ['game_log', $root.abbrev, $root.season, gid]}, text: pts + '-' + oppPts + overtime"></a></td>
      </tr>
    </tbody>
    <tr data-bind="visible: gamesList.loading"><td colspan="3" style="padding: 4px 5px;">Loading...</td></tr>
    </table>
  </div>
</div>
</p>
